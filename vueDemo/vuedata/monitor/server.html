<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Document</title>
  <script type="text/javascript" src="../js/jquery-1.11.3.min.js"></script>
  <script src="../vue-2.5.17/dist/vue.js"></script>
  <script src="../js/echarts.min.js"></script>
  <script src="../js/layui/layui.js"></script>
  <script src="../js/axios/dist/axios.js"></script>
  <link rel="stylesheet" href="../js/layui/css/layui.css">
  <link rel="stylesheet" href="css/common.css" />
</head>

<body>
  <div id="app">
    <div class="zf-header">
      服务器监控
    </div>

    <div class="zf-fluid">
      <div class="zf-card">
        <div class="zf-row">
          <form action="">
            <div class="form-inline-item">
              <label for="" class="form-label">服务器状态</label>
              <div class="form-element">
                <select name="server-state" id="" class="form-input-element">
                  <option value="">全部</option>
                </select>
              </div>
            </div>
            <div class="form-inline-item">
              <label for="" class="form-label">所属服务器</label>
              <div class="form-element">
                <select name="server" id="" class="form-input-element">
                  <option value="">全部</option>
                </select>
              </div>
            </div>
            <div class="form-inline-item">
              <div class="form-element">
                <input name="" id="" class="form-input-element input-lg input-search" placeholder="请输入如硬盘名称">
                </input>
                <i>查询</i>
              </div>
            </div>
          </form>
        </div>
        <div class="zf-table">
          <div class="zf-row">
            <div class="table-head">
              <table>
                <thead>
                  <tr>
                    <td width="100">名称</td>
                    <td width="150">IP地址</td>
                    <td width="100">状态</td>
                    <td width="100">服务状态</td>
                    <td width="150">CPU利用率</td>
                    <td width="150">内存利用率</td>
                    <td width="150">硬盘利用率</td>
                    <td width="150">系统盘IO利用率</td>
                    <td width="100">硬盘数</td>
                  </tr>
                </thead>
              </table>
            </div>
            <div class="table-body">
              <table>
                <thead>
                  <tr>
                    <th width="100"></th>
                    <th width="150"></th>
                    <th width="100"></th>
                    <th width="100"></th>
                    <th width="150"></th>
                    <th width="150"></th>
                    <th width="150"></th>
                    <th width="150"></th>
                    <th width="100"></th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="(data,index) of datas" :key="index">
                    <td><a>osa.533</a></td>
                    <td>1.1.1.1</td>
                    <!-- {} 代表对象 -->
                    <!-- <td><i class="state" v-bind:style="{backgroundColor:statecolor}">{{statename}}</i></td> -->
                    <!-- <td><i class="state" v-bind:class="data.state=='active'?'healthy':'error'">{{data.state=='active'?'正常':'错误'}}</i></td> -->
                    <td><i class="state" v-bind:class="isState(data)">{{data.state=='active'?'正常':'错误'}}</i></td>
                    <td><i class="server-state" v-bind:class="isServerState(data)"></i></td>
                    <td><i class="cpu-use"><b v-bind:style="{width:data.cpuUsed}"></b></i><span>{{data.cpuUsed}}</span></td>
                    <td><i class="mem-use"><b v-bind:style="{width:data.memUsed}"></b></i><span>{{data.memUsed}}</span></td>
                    <td><i class="disk-use"><b v-bind:style="{width:data.diskUsed}"></b></i><span>{{data.diskUsed}}</span></td>
                    <td>{{data.ioUsed}}</td>
                    <td>{{data.diskNum}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="table-page">
            <div class="zf-pages">
              <a href="">11</a>/页
            </div>
          </div>
        </div>
      </div>


    </div>
  </div>
  <script>
    var app = new Vue({
      el: '#app',
      data: {
        datas: [],
        // isServerState: {
        //   normal: 0,
        //   error: 2
        // }
      },
      computed: {
        // 计算属性传值利用了闭包传值
        isState() {
          return function (data) {
            return data.state == 'active' ? 'healthy' : 'error'
          }
        },
        isServerState() {
          return function (data) {
            return {
              normal: data.serverNormal && !data.serverError && !data.serverAlarm,
              error: data.serverError && !data.serverAlarm,
              alarm: !data.serverError && data.serverAlarm,
              errorAlarm: data.serverError && data.serverAlarm,
            }
          }
        }
      },
      mounted() {
        this.$nextTick(function () {
          var that = this
          axios.get('link2.json').then(function (data) {
            that.datas = data.data;
          })
        })
      },
      methods: {

      }
    })
  </script>
</body>